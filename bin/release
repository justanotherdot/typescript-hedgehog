#!/bin/sh -eu

# Release script for workspace packages
WORKSPACE_ROOT=$(git rev-parse --show-toplevel)
cd "$WORKSPACE_ROOT"

# First build and publish the WASM package
echo "Building and publishing WASM package..."
npm run build --workspace=@justanotherdot/hedgehog-splitmix-wasm
npm publish --workspace=@justanotherdot/hedgehog-splitmix-wasm

# Then build and publish the main package
echo "Building and publishing main package..."
npm run build --workspace=@justanotherdot/hedgehog
npm publish --workspace=@justanotherdot/hedgehog